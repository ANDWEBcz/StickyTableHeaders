(function(e,i){"use strict";function t(t,a){var o=this;o.$el=e(t),o.el=t,o.$el.bind("destroyed",e.proxy(o.teardown,o)),o.$window=e(i),o.$clonedHeader=null,o.$originalHeader=null,o.isSticky=!1,o.leftOffset=null,o.topOffset=null,o.init=function(){o.options=e.extend({},d,a),o.$el.each(function(){var i=e(this);i.css("padding",0),o.$originalHeader=e("thead:first",this),o.$clonedHeader=o.$originalHeader.clone(),o.$clonedHeader.addClass("tableFloatingHeader"),o.$clonedHeader.css("display","none"),o.$originalHeader.addClass("tableFloatingHeaderOriginal"),o.$originalHeader.after(o.$clonedHeader),o.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(o.$printStyle)}),o.updateWidth(),o.toggleHeaders(),o.bind()},o.destroy=function(){o.$el.unbind("destroyed",o.teardown),o.teardown()},o.teardown=function(){e.removeData(o.el,"plugin_"+n),o.unbind(),o.$clonedHeader.remove(),o.$originalHeader.removeClass("tableFloatingHeaderOriginal"),o.$originalHeader.css("visibility","visible"),o.$printStyle.remove(),o.el=null,o.$el=null},o.bind=function(){o.$window.on("scroll."+n,o.toggleHeaders),o.$window.on("resize."+n,o.toggleHeaders),o.$window.on("resize."+n,o.updateWidth)},o.unbind=function(){o.$window.off("."+n,o.toggleHeaders),o.$window.off("."+n,o.updateWidth),o.$el.off("."+n),o.$el.find("*").off("."+n)},o.toggleHeaders=function(){o.$el.each(function(){var i=e(this),t=isNaN(o.options.fixedOffset)?o.options.fixedOffset.height():o.options.fixedOffset,n=i.offset(),d=o.$window.scrollTop()+t,a=o.$window.scrollLeft();if(d>n.top&&n.top+i.height()-o.$clonedHeader.height()>d){var l=n.left-a;if(o.isSticky&&l===o.leftOffset&&t===o.topOffset)return;o.$originalHeader.css({position:"fixed",top:t,"margin-top":0,left:l,"z-index":1}),o.$clonedHeader.css("display",""),o.isSticky=!0,o.leftOffset=l,o.topOffset=t,o.updateWidth()}else o.isSticky&&(o.$originalHeader.css("position","static"),o.$clonedHeader.css("display","none"),o.isSticky=!1)})},o.updateWidth=function(){if(o.isSticky){var i=e("th,td",o.$originalHeader);e("th,td",o.$clonedHeader).each(function(t){var n=e(this).width();i.eq(t).css({"min-width":n,"max-width":n})}),o.$originalHeader.css("width",o.$clonedHeader.width())}},o.init()}var n="stickyTableHeaders",d={fixedOffset:0};e.fn[n]=function(i){return this.each(function(){var d=e.data(this,"plugin_"+n);d?"string"==typeof i&&d[i].apply(d):"destroy"!==i&&e.data(this,"plugin_"+n,new t(this,i))})}})(jQuery,window);