/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
	MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */(function(e,t,n){"use strict";function s(n,s){var o=this;o.$el=e(n);o.el=n;o.$el.bind("destroyed",e.proxy(o.teardown,o));o.$clonedHeader=null;o.$originalHeader=null;o.isSticky=!1;o.leftOffset=null;o.topOffset=null;o.init=function(){o.options=e.extend({},i,s);o.$el.each(function(){var t=e(this);t.css("padding",0);o.$scrollableArea=e(o.options.scrollableArea);o.$originalHeader=e("thead:first",this);o.$clonedHeader=o.$originalHeader.clone();o.$clonedHeader.addClass("tableFloatingHeader");o.$clonedHeader.css("display","none");o.$originalHeader.addClass("tableFloatingHeaderOriginal");o.$originalHeader.after(o.$clonedHeader);o.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>');e("head").append(o.$printStyle)});o.updateWidth();o.toggleHeaders();o.bind()};o.destroy=function(){o.$el.unbind("destroyed",o.teardown);o.teardown()};o.teardown=function(){o.isSticky&&o.$originalHeader.css("position","static");e.removeData(o.el,"plugin_"+r);o.unbind();o.$clonedHeader.remove();o.$originalHeader.removeClass("tableFloatingHeaderOriginal");o.$originalHeader.css("visibility","visible");o.$printStyle.remove();o.el=null;o.$el=null};o.bind=function(){o.$scrollableArea.on("scroll."+r,o.toggleHeaders);if(o.$scrollableArea[0]!==t){e(t).on("scroll."+r,o.setPositionValues);e(t).on("resize."+r,o.toggleHeaders)}o.$scrollableArea.on("resize."+r,o.toggleHeaders);o.$scrollableArea.on("resize."+r,o.updateWidth)};o.unbind=function(){o.$scrollableArea.off("."+r,o.toggleHeaders);if(o.$scrollableArea[0]!==t){e(t).off("scroll."+r,o.setPositionValues);e(t).off("resize."+r,o.setPositionValues)}o.$scrollableArea.off("."+r,o.updateWidth);o.$el.off("."+r);o.$el.find("*").off("."+r)};o.toggleHeaders=function(){o.$el.each(function(){var n=e(this),r=o.$scrollableArea[0]===t?isNaN(o.options.fixedOffset)?o.options.fixedOffset.height():o.options.fixedOffset:o.$scrollableArea.offset().top+(isNaN(o.options.fixedOffset)?0:o.options.fixedOffset),i=n.offset(),s=o.$scrollableArea.scrollTop()+r,u=o.$scrollableArea.scrollLeft(),a=o.$scrollableArea[0]===t?s>i.top:r>i.top,f=(o.$scrollableArea[0]===t?s:0)<i.top+n.height()-o.$clonedHeader.height()-(o.$scrollableArea[0]===t?0:r);if(a&&f){var l=i.left-u;if(o.isSticky&&l===o.leftOffset&&r===o.topOffset)return;o.$originalHeader.css({position:"fixed","margin-top":0,left:l,"z-index":1});o.isSticky=!0;o.leftOffset=l;o.topOffset=r;o.setPositionValues();o.$clonedHeader.css("display","");o.updateWidth()}else if(o.isSticky){o.$originalHeader.css("position","static");o.$clonedHeader.css("display","none");o.isSticky=!1}})};o.setPositionValues=function(){var n=e(t).scrollTop(),r=e(t).scrollLeft();if(!o.isSticky||n<0||n+e(t).height()>e(document).height()||r<0||r+e(t).width()>e(document).width())return;o.$originalHeader.css({top:o.topOffset-(o.$scrollableArea[0]===t?0:n),left:o.leftOffset-(o.$scrollableArea[0]===t?0:r)})};o.updateWidth=function(){if(!o.isSticky)return;var t=e("th,td",o.$originalHeader),n=e("th,td",o.$clonedHeader);o.cellWidths=[];o.getWidth(n);o.setWidth(n,t);o.$originalHeader.css("width",o.$clonedHeader.width())};o.getWidth=function(t){t.each(function(t){var n,r=e(this);r.css("box-sizing")==="border-box"?n=r.outerWidth():n=r.width();o.cellWidths[t]=n})};o.setWidth=function(e,t){e.each(function(e){var n=o.cellWidths[e];t.eq(e).css({"min-width":n,"max-width":n})})};o.updateOptions=function(t){o.options=e.extend({},i,t);o.updateWidth();o.toggleHeaders()};o.init()}var r="stickyTableHeaders",i={fixedOffset:0,scrollableArea:t};e.fn[r]=function(t){return this.each(function(){var n=e.data(this,"plugin_"+r);n?typeof t=="string"?n[t].apply(n):n.updateOptions(t):t!=="destroy"&&e.data(this,"plugin_"+r,new s(this,t))})}})(jQuery,window);